@using Raft
@rendermode InteractiveServer
@page "/"

<PageTitle>Home</PageTitle>

<h1>Hello, world!</h1>

Welcome to your new app.

<button @onclick="startSimulation">Start</button>

@foreach(var node in Nodes)
{
	<div>
		@node.Id
	</div>
}

@code {

	List<SimulationNode> Nodes = new();

	void startSimulation()
	{
		var node1 = new Node([], 1);
		var node2 = new Node([], 2);
		var node3 = new Node([], 3);

		var simulation1 = new SimulationNode(node1);
		var simulation2 = new SimulationNode(node2);
		var simulation3 = new SimulationNode(node3);

		node1.OtherNodes = [simulation2, simulation3];
		node2.OtherNodes = [simulation1, simulation3];
		node3.OtherNodes = [simulation1, simulation2];

		Nodes = [simulation1, simulation2, simulation3];
	}
}
